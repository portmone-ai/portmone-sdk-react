import React from 'react';
import { QRCode } from 'react-qrcode-logo';

export default class PortmoneQRCode extends React.Component {

    componentDidMount() {
        /* Register the scheduler to check the status of Data Share Request */
        const code = this.props.code;
        const onSuccess = this.props.onSuccess;

        window.setInterval(function(){
            window.fetch(
                `https://api.portmone.ai/portmone/shares/${code}/status`,
                {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                },
            ).then(async res => {
                if (res.ok) {
                    const result = await res.json()
                    if (result.status === 'COMPLETED') {
                        onSuccess(result.id);
                    }
                }
            }).catch(error => {
                console.log(error);
            })
        }, 3000);
    }

    render() {
        return (
            <QRCode
                size={150}
                ecLevel={'H'}
                value={this.props.code}
                logoImage={"data:image/png;base64,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"}
                logoWidth={55} logoHeight={10}
            />
        );
    }
}

